<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: FAQ</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>FAQ </h1>  </div>
</div>
<div class="contents">
<h1>Frequently Asked Questions</h1>
<h2>about the SGI Standard Template Library</h2>
<hr/>
<p><b>Is the STL Y2K compliant?</b> <br/>
 Yes. The STL does not store or manipulate dates in any way, so there are no year 2000 issues.</p>
<p><b>Which compilers are supported?</b> <br/>
 The STL has been tested on these compilers: SGI 7.1 and later, or 7.0 with the -n32 or -64 flag; gcc 2.8 or egcs 1.x; Microsoft 5.0 and later. (But see below.) Boris Fomitchev distributes a <a href="http://www.metabyte.com/~fbp/stl/index.html">port</a> for some other compilers. </p>
<p>If you succeed in using the SGI STL with some other compiler, please <a href="mailto:stl@sgi.com">let us know</a>, and please tell us what modifications (if any) you had to make. We expect that most of the changes will be restricted to the <code>&lt;stl_config.h&gt;</code> header.</p>
<p><b>What about older SGI compilers?</b> <br/>
</p>
<p>Given the rate of improvement in C++ implementations, SGI strongly recommends that you upgrade your compiler. If this is not possible, you might try the version of the STL for older Borland and Microsoft compilers (see the <b>Download the STL</b> page), or Boris Fomitchev's <a href="http://www.metabyte.com/~fbp/stl/index.html">port</a>. Neither of these is supported.</p>
<p><b>How do I install the SGI STL?</b> <br/>
 You should unpack the STL include files in a new directory, and then use the <code>-I</code> (or <code>/I</code>) option to direct the compiler to look there first. We don't recommend overwriting the vendor's include files. </p>
<p>At present the SGI STL consists entirely of header files. You don't have to build or link in any additional runtime libraries.</p>
<p><b>Are there any compatibility issues with Visual C++?</b> <br/>
 Visual C++ provides its own STL implementation, and some of the other Microsoft C++ library headers may rely on that implementation. In particular, the SGI STL has not been tested in combination with Microsoft's new <code>&lt;iostream&gt;</code> header. It has been used successfully with the older <code>&lt;iostream.h&gt;</code> header.</p>
<p><b>Is the SGI STL thread safe?</b> <br/>
 Yes. However, you should be aware that not everyone uses the phrase "thread safe" the same way. See our <a class="el" href="stldoc_thread_safety.html">thread_safety</a> for our design goals.</p>
<p><b>Are hash tables part of the C++ standard?</b> <br/>
 No. The hash table classes (<code><a class="el" href="stldoc_hash_set.html">hash_set</a></code>, <code><a class="el" href="stldoc_hash_map.html">hash_map</a></code> <code><a class="el" href="stldoc_hash_multiset.html">hash_multiset</a></code> <code><a class="el" href="stldoc_hash_multimap.html">hash_multimap</a></code> <code><a class="el" href="stldoc_hash.html">hash</a></code>) are an extension. They may be added to a future revision of the C++ standard. </p>
<p>The <code><a class="el" href="stldoc_Rope.html">Rope</a></code> and <code><a class="el" href="stldoc_Slist.html">Slist</a></code> classes are also extensions.</p>
<p><b>Why is <code>list&lt;&gt;<a class="el" href="group__selection__algorithms.html#ga7c5bdb55e42beda2cd6acbe643ef4fa2">size()</a></code> linear time?</b> <br/>
 The <code><a class="el" href="group__selection__algorithms.html#ga7c5bdb55e42beda2cd6acbe643ef4fa2">size()</a></code> member function, for <code><a class="el" href="stldoc_List.html">List</a></code> and <code><a class="el" href="stldoc_Slist.html">Slist</a></code>, takes time proportional to the number of elements in the list. This was a deliberate tradeoff. The only way to get a constant-time <code><a class="el" href="group__selection__algorithms.html#ga7c5bdb55e42beda2cd6acbe643ef4fa2">size()</a></code> for linked lists would be to maintain an extra member variable containing the list's size. This would require taking extra time to update that variable (it would make <code>splice()</code> a linear time operation, for example), and it would also make the list larger. Many list algorithms don't require that extra word (algorithms that do require it might do better with vectors than with lists), and, when it is necessary to maintain an explicit size count, it's something that users can do themselves. </p>
<p>This choice is permitted by the C++ standard. The standard says that <code><a class="el" href="group__selection__algorithms.html#ga7c5bdb55e42beda2cd6acbe643ef4fa2">size()</a></code> "should" be constant time, and "should" does not mean the same thing as "shall". This is the officially recommended ISO wording for saying that an implementation is supposed to do something unless there is a good reason not to. </p>
<p>One implication of linear time <code><a class="el" href="group__selection__algorithms.html#ga7c5bdb55e42beda2cd6acbe643ef4fa2">size()</a></code>: you should never write </p>
<div class="fragment"><pre class="fragment">  <span class="keywordflow">if</span> (L.size() == 0)
    ...
</pre></div><p> Instead, you should write </p>
<div class="fragment"><pre class="fragment">  <span class="keywordflow">if</span> (L.empty())
    ...
</pre></div><p><b>Why doesn't <code>map</code>'s operator&lt; use the <code>map</code>'s comparison function?</b> <br/>
 A <code>map</code> has a notion of comparison, since one of its template parameters is a comparison function. However, <code>operator&lt;</code> for maps uses the elements' <code>operator&lt;</code> rather than that comparison function. This appears odd, but it is deliberate and we believe that it is correct. </p>
<p>At the most trivial level, this isn't a bug in our implementation because it's what's mandated by the C++ standard. (The behavior of <code>operator&lt;</code> is described in Table 65, in section 23.1.) </p>
<p>A more interesting question: is the requirement in the standard correct, or is there actually a bug in the standard? </p>
<p>We believe that the requirements in the standard are correct. </p>
<p>First, there's a consistency argument: <code>operator&lt;</code> for a <code><a class="el" href="stldoc_Vector.html">Vector</a></code> (or <code><a class="el" href="stldoc_Deque.html">Deque</a></code>, or <code><a class="el" href="stldoc_List.html">List</a></code>) uses the element's <code>operator&lt;</code>. Should <code><a class="el" href="stldoc_Map.html">Map</a></code>'s <code>operator&lt;</code> do something else, just because there is another plausible way to compare objects? It's reasonable to say, for all containers, that <code>operator&lt;</code> always means <code>operator&lt;</code>, and that if you need a different kind of comparison you can explicitly use <code><a class="el" href="stldoc_lexicographical_compare.html">lexicographical_compare</a></code>. </p>
<p>Second, if we did use the <code><a class="el" href="stldoc_Map.html">Map</a></code>'s comparison function, there would be a problem: which one do we use? There are two <code>map</code> arguments, and, while we know that their comparison functions have the same type, we don't know that they have the same behavior. The comparison function, after all, is a function object, and it might have internal state that affects the comparison. (You might have a function object to compare strings, for example, with a boolean flag that determines whether the comparison is case-sensitive.) </p>
<p>There's also a related question, incidentally: how should <code>operator==</code> behave for sets? A <code>set</code>'s comparison function induces an equivalence relation, so, just as you can use the <code>set</code>'s comparison function for lexicographical ordering, you could also use it for a version of equality. Again, though, we define <code>operator==(const set&amp;, const set&amp;)</code> so that it just calls the elements' <code>operator==</code>.</p>
<p><b>Why does a <code>vector</code> expand its storage by a factor of two when it performs a reallocation?</b> <br/>
 Expanding a <code><a class="el" href="stldoc_Vector.html">Vector</a></code> by a factor of two is a time-space tradeoff; it means that each element will (on average) be copied twice when you're building a <code><a class="el" href="stldoc_Vector.html">Vector</a></code> one element at a time, and that the ratio of wasted to used space is at most 1. (In general, if the exponent for expansion is r, the worst case wasted/used ratio is r - 1 and the number of times an element is copied approaches r/(r - 1). If r = 1.25, for example, then elements are copied five times instead of twice.) </p>
<p>If you need to control <code><a class="el" href="stldoc_Vector.html">Vector</a></code>'s memory usage more finely, you can use the member functions <code>capacity()</code> and <code>reserve()</code> instead of relying on automatic reallocation.</p>
<p><b>Why do the <em>pop</em> member functions return <code>void</code>?</b> <br/>
 All of the STL's <em>pop</em> member functions (<code>pop_back</code> in <code><a class="el" href="stldoc_Vector.html">Vector</a></code>, <code><a class="el" href="stldoc_List.html">List</a></code>, and <code><a class="el" href="stldoc_Deque.html">Deque</a></code>; <code>pop_front</code> in <code><a class="el" href="stldoc_List.html">List</a></code>, <code><a class="el" href="stldoc_Slist.html">Slist</a></code>, and <code><a class="el" href="stldoc_Deque.html">Deque</a></code>; <code>pop</code> in <code><a class="el" href="stldoc_stack.html">stack</a></code>, <code><a class="el" href="stldoc_queue.html">queue</a></code>, and <code><a class="el" href="stldoc_priority_queue.html">priority_queue</a></code>) return <code>void</code>, rather than returning the element that was removed. This is for the sake of efficiency. </p>
<p>If the <code>pop</code> member functions were to return the element that was removed then they would have to return it by value rather than by reference. (The element is being removed, so there wouldn't be anything for a reference to point to.) Return by value, however, would be inefficient; it would involve at least one unnecessary copy constructor invocation. The <code>pop</code> member functions return nothing because it is impossible for them to return a value in a way that is both correct and efficient. </p>
<p>If you need to retrieve the value and then remove it, you can perform the two operations explicitly. For example: </p>
<div class="fragment"><pre class="fragment">  std::stack&lt;T&gt; s;
  ...
  T old_value = s.top();  
  s.pop();
</pre></div><p><b>How do I sort a range in descending order instead of ascending?</b> </p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__sort.html#ga4e8798cfae776b33d57d9322d2ce7f79" title="sort implementation">sort</a>(first, last, greater&lt;T&gt;());
</pre></div><p> (Note that it must be <code>greater</code>, not <code>greater_eq</code>. The comparison function <code>f</code> must be one such that <code>f(x, x)</code> is <code>false</code> for every <code>x</code>.)</p>
<p><b>Why am I getting uninitialized memory reads from Purify<sup>TM</sup>?</b> <br/>
 We believe that the uninitialized memory read (UMR) messages in STL data structures are artifacts and can be ignored. </p>
<p>There are a number of reasons the compiler might generate reads from uninitialized memory (<em>e.g.</em> structure padding, inheritance from empty base classes, which still have nonzero size). Purify tries to deal with this by distinguishing between uninitialized memory reads (UMR) and uninitialized memory copies (UMC). The latter are not displayed by default.</p>
<p>The distinction between the two isn't completely clear, but appears to be somewhat heuristic. The validity of the heuristic seems to depend on compiler optimizations, etc. As a result, some perfectly legitimate code generates UMR messages. It's unfortunately often hard to tell whether a UMR message represents a genuine problem or just an artifact.</p>
<p><b>Why does Bounds Checker<sup>TM</sup> say that I have memory leaks?</b> <br/>
 This is not an STL bug. It is an artifact of certain kinds of leak detectors. </p>
<p>In the default STL allocator, memory allocated for blocks of small objects is not returned to <code>malloc</code>. It can only be reused by subsequent <code>allocate</code> requests of (approximately) the same size. Thus programs that use the default may appear to leak memory when monitored by certain kinds of simple leak detectors. This is intentional. Such "leaks" do not accumulate over time. Such "leaks" are not reported by garbage-collector-like leak detectors. </p>
<p>The primary design criterion for the default STL allocator was to make it no slower than the HP STL per-class allocators, but potentially thread-safe, and significantly less prone to fragmentation. Like the HP allocators, it does not maintain the necessary data structures to free entire chunks of small objects when none of the contained small objects are in use. This is an intentional choice of execution time over space use. It may not be appropriate for all programs. On many systems <code>malloc_alloc</code> may be more space efficient, and can be used when that is crucial. </p>
<p>The HP allocator design returned entire memory pools when the entire allocator was no longer needed. To allow this, it maintains a count of containers using a particular allocator. With the SGI design, this would only happen when the last container disappears, which is typically just before program exit. In most environments, this would be highly counterproductive; <code>free</code> would typically have to touch many long unreferenced pages just before the operating system reclaims them anyway. It would often introduce a significant delay on program exit, and would possibly page out large portions of other applications. There is nothing to be gained by this action, since the OS reclaims memory on program exit anyway, and it should do so without touching that memory. </p>
<p>In general, we recommend that leak detection tests be run with <code>malloc_alloc</code>. This yields more precise results with GC-based detectors (<em>e.g.</em> Pure Atria's Purify<sup>TM</sup>), and it provides useful results even with detectors that simply count allocations and deallocations. </p>
</div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
