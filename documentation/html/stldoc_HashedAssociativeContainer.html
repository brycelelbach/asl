<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: HashedAssociativeContainer</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>HashedAssociativeContainer </h1>  </div>
</div>
<div class="contents">
<table  cellpadding="0" cellspacing="0" width="100%" border="0">
<tr>
<td align="left"><div align="center">
<img src="containers.gif" alt="containers.gif"/>
</div>
 </td><td width="100%"></td><td align="right"><div align="center">
<img src="concept.gif" alt="concept.gif"/>
</div>
  </td></tr>
<tr>
<td align="left" valign="top"><b>Category</b>: containers </td><td width="100%"></td><td align="right" valign="top"><b>Component type</b>: concept  </td></tr>
</table>
<h2><a class="anchor" id="Description"></a>
Description</h2>
<p>A Hashed Associative Container is an <a class="el" href="stldoc_AssociativeContainer.html">AssociativeContainer</a> whose implementation is a hash table. <a href="#1">[1]</a> The elements of a Hashed Associative Container are not guaranteed to be in any meaningful order; in particular, they are not sorted. The worst case complexity of most operations on Hashed Associative Containers is linear in the size of the container, but the average case complexity is constant time; this means that for applications where values are simply stored and retrieved, and where ordering is unimportant, Hashed Associative Containers are usually much faster than <a href="SortedAssociativeContainer.html">Sorted Associative Containers</a>. </p>
<h2><a class="anchor" id="Refinement_of"></a>
Refinement of</h2>
<p><a class="el" href="stldoc_AssociativeContainer.html">AssociativeContainer</a> </p>
<h2><a class="anchor" id="Associated_types"></a>
Associated types</h2>
<p>The following new types are introduced, in addition to the types defined in the <a class="el" href="stldoc_AssociativeContainer.html">AssociativeContainer</a> requirements. </p>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<td valign="top">Hash function  </td><td valign="top"><code>X::hasher</code>  </td><td valign="top">A type that is a model of <a class="el" href="stldoc_HashFunction.html">HashFunction</a>. <code>X::hasher</code>'s argument type must be <code>X::key_type</code>.   </td></tr>
<tr>
<td valign="top">Key equal  </td><td valign="top"><code>X::key_equal</code>  </td><td valign="top">A <a class="el" href="stldoc_BinaryPredicate.html">BinaryPredicate</a> whose argument type is <code>X::key_type</code>. An object of type <code>key_equal</code> returns <code>true</code> if its arguments are the same key, and <code>false</code> otherwise. <code>X::key_equal</code> must be an equivalence relation.   </td></tr>
</table>
<h2><a class="anchor" id="Notation"></a>
Notation</h2>
<table class="doxtable">
<tr>
<td valign="top"><code>X</code>  </td><td valign="top">A type that is a model of Hashed Associative Container   </td></tr>
<tr>
<td valign="top"><code>a</code>  </td><td valign="top">Object of type <code>X</code>   </td></tr>
<tr>
<td valign="top"><code>t</code>  </td><td valign="top">Object of type <code>X::value_type</code>   </td></tr>
<tr>
<td valign="top"><code>k</code>  </td><td valign="top">Object of type <code>X::key_type</code>   </td></tr>
<tr>
<td valign="top"><code>p</code>, <code>q</code>  </td><td valign="top">Object of type <code>X::iterator</code>   </td></tr>
<tr>
<td valign="top"><code>n</code>  </td><td valign="top">Object of type <code>X::size_type</code>   </td></tr>
<tr>
<td valign="top"><code>h</code>  </td><td valign="top">Object of type <code>X::hasher</code>   </td></tr>
<tr>
<td valign="top"><code>c</code>  </td><td valign="top">Object of type <code>X::key_equal</code>   </td></tr>
</table>
<h2><a class="anchor" id="Definitions"></a>
Definitions</h2>
<p>A <em>hash function</em> for a Hashed Associative Container <code>X</code> is a <a class="el" href="stldoc_UnaryFunction.html">UnaryFunction</a> whose argument type is <code>X::key_type</code> and whose return type is <code>size_t</code>. A hash function must be deterministic (that is, it must always return the same value whenever it is called with the same argument), but return values of the hash function should be as uniform as possible: ideally, no two keys will hash to the same value. <a href="#2">[2]</a> </p>
<p>Elements in a Hashed Associative Container are organized into <em>buckets</em>. A Hashed Associative Container uses the value of the hash function to determine which bucket an element is assigned to. </p>
<p>The number of elements in a Hashed Associative Container divided by the number of buckets is called the <em>load factor</em>. A Hashed Associative Container with a small load factor is faster than one with a large load factor. </p>
<h2><a class="anchor" id="Valid_expressions"></a>
Valid expressions</h2>
<p>In addition to the expressions defined in <a class="el" href="stldoc_AssociativeContainer.html">AssociativeContainer</a>, the following expressions must be valid. </p>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<th>Name  </th><th>Expression  </th><th>Type requirements  </th><th>Return type   </th></tr>
<tr>
<td valign="top">Default constructor  </td><td valign="top"><div class="fragment"><pre class="fragment">X()
X a;
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Constructor with bucket count  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n)
X a(n);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Constructor with hash function  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n, h)
X a(n, h);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Constructor with key equal  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n, h, k)
X a(n, h, k);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Hash function  </td><td valign="top"><code>a.hash_funct()</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>X::hasher</code>   </td></tr>
<tr>
<td valign="top">Key equal  </td><td valign="top"><code>a.key_eq()</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>X::key_equal</code>   </td></tr>
<tr>
<td valign="top">Erase key  </td><td valign="top"><code>a.erase(k)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>size_type</code>   </td></tr>
<tr>
<td valign="top">Erase element  </td><td valign="top"><code>a.erase(p)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>void</code>   </td></tr>
<tr>
<td valign="top">Erase range  </td><td valign="top"><code>a.erase(p, q)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>void</code>   </td></tr>
<tr>
<td valign="top">Find  </td><td valign="top"><code>a.find(k)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>iterator</code> if <code>a</code> is mutable, otherwise <code>const_iterator</code>   </td></tr>
<tr>
<td valign="top">Count  </td><td valign="top"><code>a.count(k)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>size_type</code>   </td></tr>
<tr>
<td valign="top">Equal range  </td><td valign="top"><code>a.equal_range(k)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>pair&lt;iterator, iterator&gt;</code> if <code>a</code> is mutable, otherwise <code>pair&lt;const_iterator, const_iterator&gt;</code>.   </td></tr>
<tr>
<td valign="top">Bucket count  </td><td valign="top"><code>a.bucket_count()</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>X::size_type</code>   </td></tr>
<tr>
<td valign="top">Resize  </td><td valign="top"><code>a.resize(n)</code>  </td><td valign="top">&#160;  </td><td valign="top"><code>void</code>   </td></tr>
</table>
<h2><a class="anchor" id="Expression_semantics"></a>
Expression semantics</h2>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<th>Name  </th><th>Expression  </th><th>Precondition  </th><th>Semantics  </th><th>Postcondition   </th></tr>
<tr>
<td valign="top">Default constructor  </td><td valign="top"><div class="fragment"><pre class="fragment">X()
X a;
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">Creates an empty container, using <code>hasher()</code> as the hash function and <code>key_equal()</code> as the key equality function.  </td><td valign="top">The size of the container is <code>0</code>. The bucket count is an unspecified default value. The hash function is <code>hasher()</code>, and the key equality function is <code>key_equal()</code>.   </td></tr>
<tr>
<td valign="top">Constructor with bucket count  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n)
X a(n);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">Creates an empty container with at least <code>n</code> buckets, using <code>hasher()</code> as the hash function and <code>key_equal()</code> as the key equality function.  </td><td valign="top">The size of the container is <code>0</code>. The bucket count is greater than or equal to <code>n</code>. The hash function is <code>hasher()</code>, and the key equality function is <code>key_equal()</code>.   </td></tr>
<tr>
<td valign="top">Constructor with hash function  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n, h)
X a(n, h);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">Creates an empty container with at least <code>n</code> buckets, using <code>h</code> as the hash function and <code>key_equal()</code> as the key equality function.  </td><td valign="top">The size of the container is <code>0</code>. The bucket count is greater than or equal to <code>n</code>. The hash function is <code>h</code>, and the key equality function is <code>key_equal()</code>.   </td></tr>
<tr>
<td valign="top">Constructor with key equal  </td><td valign="top"><div class="fragment"><pre class="fragment">X(n, h, k)
X a(n, h, k);
</pre></div>  </td><td valign="top">&#160;  </td><td valign="top">Creates an empty container with at least <code>n</code> buckets, using <code>h</code> as the hash function and <code>k</code> as the key equality function.  </td><td valign="top">The size of the container is <code>0</code>. The bucket count is greater than or equal to <code>n</code>. The hash function is <code>h</code>, and the key equality function is <code>k</code>.   </td></tr>
<tr>
<td valign="top">Hash function  </td><td valign="top"><code>a.hash_funct()</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns the hash function used by <code>a</code>.  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Key equal  </td><td valign="top"><code>a.key_eq()</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns the key equal function used by <code>a</code>.  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Erase key  </td><td valign="top"><code>a.erase(k)</code>  </td><td valign="top">&#160;  </td><td valign="top">Destroys all elements whose key is the same as <code>k</code>, and removes them from <code>a</code>. <a href="#2">[2]</a> The return value is the number of elements that were erased, <em>i.e.</em> the old value of <code>a.count(k)</code>.  </td><td valign="top"><code>a.size()</code> is decremented by <code>a.count(k)</code>. <code>a</code> contains no elements with key <code>k</code>.   </td></tr>
<tr>
<td valign="top">Erase element  </td><td valign="top"><code>a.erase(p)</code>  </td><td valign="top"><code>p</code> is a dereferenceable iterator in <code>a</code>.  </td><td valign="top">Destroys the element pointed to by <code>p</code>, and removes it from <code>a</code>.  </td><td valign="top"><code>a.size()</code> is decremented by 1.   </td></tr>
<tr>
<td valign="top">Erase range  </td><td valign="top"><code>a.erase(p, q)</code>  </td><td valign="top"><code>[p, q)</code> is a valid range in <code>a</code>.  </td><td valign="top">Destroys the elements in the range <code>[p,q)</code> and removes them from <code>a</code>.  </td><td valign="top"><code>a.size()</code> is decremented by the distance from <code>i</code> to <code>j</code>.   </td></tr>
<tr>
<td valign="top">Find  </td><td valign="top"><code>a.find(k)</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns an iterator pointing to an element whose key is the same as <code>k</code>, or <code>a.end()</code> if no such element exists.  </td><td valign="top">Either the return value is <code>a.end()</code>, or else the return value has a key that is the same as <code>k</code>.   </td></tr>
<tr>
<td valign="top">Count  </td><td valign="top"><code>a.count(k)</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns the number of elements in <code>a</code> whose keys are the same as <code>k</code>.  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Equal range  </td><td valign="top"><code>a.equal_range(k)</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns a pair <code>P</code> such that <code>[P.first, P.second)</code> is a range containing all elements in <code>a</code> whose keys are the same as <code>k</code>. <a href="#3">[3]</a> If no elements have the same key as <code>k</code>, the return value is an empty range.  </td><td valign="top">The distance between <code>P.first</code> and <code>P.second</code> is equal to <code>a.count(k)</code>. If <code>p</code> is a dereferenceable iterator in <code>a</code>, then either <code>a</code> lies in the range <code>[P.first, P.second)</code>, or else <code>*a</code> has a key that is not the same as <code>k</code>.   </td></tr>
<tr>
<td valign="top">Bucket count  </td><td valign="top"><code>a.bucket_count()</code>  </td><td valign="top">&#160;  </td><td valign="top">Returns the number of buckets in <code>a</code>.  </td><td valign="top">&#160;   </td></tr>
<tr>
<td valign="top">Resize  </td><td valign="top"><code>a.resize(n)</code>  </td><td valign="top">&#160;  </td><td valign="top">Increases the bucket count of <code>a</code>.  </td><td valign="top">The bucket count of <code>a</code> will be at least <code>n</code>. All iterators pointing to element in <code>a</code> will remain valid. <a href="#3">[3]</a>   </td></tr>
</table>
<h2><a class="anchor" id="Complexity_guarantees"></a>
Complexity guarantees</h2>
<p>The default constructor, constructor with bucket count, constructor with hash function, and constructor with key equal, are all amortized constant time. </p>
<p>Hash Function and Key Equal are amortized constant time. </p>
<p>Average complexity for Erase Key is <code>O(count(k))</code>. Worst case is linear in the size of the container. </p>
<p>Erase Element is amortized constant time. </p>
<p>Average complexity for Erase Range is <code>O(N)</code>, where <code>N</code> is the length of the range being erased. Worse case is linear in the size of the container. </p>
<p>Average complexity for Find is constant time. Worst case is linear in the size of the container. </p>
<p>Average complexity for Equal Range is <code>O(count(k))</code>. Worst case is linear in the size of the container. </p>
<p>Average complexity for Count is <code>O(count(k))</code>. Worst case is linear in the size of the container. </p>
<p>Bucket Count is amortized constant time. </p>
<p>Resize is linear in the size of the container. </p>
<h2><a class="anchor" id="Invariants"></a>
Invariants</h2>
<h2><a class="anchor" id="Models"></a>
Models</h2>
<ul>
<li>
<code><a class="el" href="stldoc_hash_set.html">hash_set</a></code> </li>
<li>
<code><a class="el" href="stldoc_hash_map.html">hash_map</a></code> </li>
<li>
<code><a class="el" href="stldoc_hash_multiset.html">hash_multiset</a></code> </li>
<li>
<code><a class="el" href="stldoc_hash_multimap.html">hash_multimap</a></code> </li>
</ul>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<p><a class="anchor" id="1"></a>[1] There is an extensive literature dealing with hash tables. See, for example, section 6.4 of Knuth. (D. E. Knuth, <em>The Art of Computer Programming. Volume 3: Sorting and Searching</em>. Addison-Wesley, 1975.) </p>
<p><a class="anchor" id="2"></a>[2] If the hash function is poor (that is, if many different keys hash to the same value) then this will hurt performance. The worst case is where every key hashes to the same value; in this case, run-time complexity of most Hashed Associative Container operations will be linear in the size of the container. </p>
<p><a class="anchor" id="3"></a>[3] Resizing does not invalidate iterators; however, it does not necessarily preserve the ordering relation between iterators. That is, if <code>i</code> and <code>j</code> are iterators that point into a Hashed Associative Container such that <code>i</code> comes immediately before <code>j</code>, then there is no guarantee that <code>i</code> will still come immediately before <code>j</code> after the container is resized. The only guarantee about about the ordering of elements is the contiguous storage invariant: elements with the same key are always adjacent to each other. </p>
<h2><a class="anchor" id="See_also"></a>
See also</h2>
<p><a class="el" href="stldoc_AssociativeContainer.html">AssociativeContainer</a>, <a class="el" href="stldoc_SortedAssociativeContainer.html">SortedAssociativeContainer</a>, <a class="el" href="stldoc_UniqueHashedAssociativeContainer.html">UniqueHashedAssociativeContainer</a>, <a class="el" href="stldoc_MultipleHashedAssociativeContainer.html">MultipleHashedAssociativeContainer</a>, </p>
</div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
