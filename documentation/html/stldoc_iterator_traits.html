<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: iterator_traits</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>iterator_traits </h1>  </div>
</div>
<div class="contents">
<table  cellpadding="0" cellspacing="0" width="100%" border="0">
<tr>
<td align="left"><div align="center">
<img src="iterators.gif" alt="iterators.gif"/>
</div>
 </td><td width="100%"></td><td align="right"><div align="center">
<img src="type.gif" alt="type.gif"/>
</div>
  </td></tr>
<tr>
<td align="left" valign="top"><b>Category</b>: iterators </td><td width="100%"></td><td align="right" valign="top"><b>Component type</b>: type  </td></tr>
</table>
<h2><a class="anchor" id="Description"></a>
Description</h2>
<p>As described in the <a class="el" href="stldoc_Iterators.html">Iterators</a>, one of the most important facts about iterators is that they have associated types. An iterator type, for example, has an associated <em>value type</em>: the type of object that the iterator points to. It also has an associated <em>distance type</em>, or <em>difference type</em>, a signed integral type that can be used to represent the distance between two iterators. </p>
<p>(Pointers, for example, are iterators; the value type of <code>int*</code> is <code>int</code>. Its distance type is <code>ptrdiff_t</code>, because, if <code>p1</code> and <code>p2</code> are pointers, the expression <code>p1 - p2</code> has type <code>ptrdiff_t</code>.) </p>
<p>Generic algorithms often need to have access to these associated types; an algorithm that takes a range of iterators, for example, might need to declare a temporary variable whose type is the iterators' value type. The class <code>iterator_traits</code> is a mechanism that allows such declarations. </p>
<p>The most obvious way to allow declarations of that sort would be to require that all iterators declare nested types; an iterator <code>I</code>'s value type, for example, would be <code>I::value_type</code>. That can't possibly work, though. Pointers are iterators, and pointers aren't classes; if <code>I</code> is (say) <code>int*</code>, then it's impossible to define <code>I::value_type</code> to be <code>int</code>. Instead, <code>I</code>'s value type is written <code>iterator_traits&lt;I&gt;value_type</code>. <code>iterator_traits</code> is a template class that contains nothing but nested <code>typedef</code>s; in addition to <code>value_type</code>, <code>iterator_traits</code> defines the nested types <code>iterator_category</code>, <code>difference_type</code>, <code>pointer</code>, and <code>reference</code>. </p>
<p>The library contains two definitions of <code>iterator_traits</code>: a fully generic one, and a specialization that is used whenever the template argument is a pointer type <a href="#1">[1]</a>. The fully generic version defines <code>iterator_traits&lt;I&gt;value_type</code> as a synonym for <code>I::value_type</code>, <code>iterator_traits&lt;I&gt;difference_type</code> as a synonym for <code>I::difference_type</code>, and so on. Since pointers don't have nested types, <code>iterator_traits&lt;T*&gt;</code> has a different definition. </p>
<p>The implementation of <code>iterator_traits</code> is actually simpler than this discussion. </p>
<div class="fragment"><pre class="fragment">  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Iterator&gt;
  <span class="keyword">struct </span>iterator_traits {
    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::iterator_category iterator_category;
    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::value_type        value_type;
    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::difference_type   difference_type;
    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::pointer           pointer;
    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::reference         reference;
  };

  <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
  <span class="keyword">struct </span>iterator_traits&lt;T*&gt; {
    <span class="keyword">typedef</span> random_access_iterator_tag iterator_category;
    <span class="keyword">typedef</span> T                          value_type;
    <span class="keyword">typedef</span> ptrdiff_t                  difference_type;
    <span class="keyword">typedef</span> T*                         pointer;
    <span class="keyword">typedef</span> T&amp;                         reference;
  };
</pre></div> <p>If you are defining a new iterator type <code>I</code>, then you must ensure that <code>iterator_traits&lt;I&gt;</code> is defined properly. There are two ways to do this. First, you can define your iterator so that it has nested types <code>I::value_type</code>, <code>I::difference_type</code>, and so on. Second, you can explicitly specialize <code>iterator_traits</code> for your type. The first way is almost always more convenient, however, especially since you can easily ensure that your iterator has the appropriate nested types just by inheriting from one of the base classes <code><a class="el" href="stldoc_input_iterator.html">input_iterator</a></code>, <code><a class="el" href="stldoc_output_iterator.html">output_iterator</a></code>, <code><a class="el" href="stldoc_forward_iterator.html">forward_iterator</a></code>, <code><a class="el" href="stldoc_bidirectional_iterator.html">bidirectional_iterator</a></code>, or <code><a class="el" href="stldoc_random_access_iterator.html">random_access_iterator</a></code>. </p>
<p>Note that <code>iterator_traits</code> is new; it was added to the draft C++ standard relatively recently. Both the old <a class="el" href="stldoc_iterator_tags.html">iterator_tags</a> mechanism and the new <code>iterator_traits</code> mechanism are currently supported <a href="#1">[1]</a>, but the old iterator tag functions are no longer part of the standard C++ library and they will eventually be removed. </p>
<h2><a class="anchor" id="Example"></a>
Example</h2>
<p>This generic function returns the last element in a non-empty range. Note that there is no way to define a function with this interface in terms of the old <code><a class="el" href="stldoc_value_type.html">value_type</a></code> function, because the function's return type must be declared to be the iterator's value type. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">template</span> &lt;<span class="keyword">class</span> InputIterator&gt;
iterator_traits&lt;InputIterator&gt;::value_type
last_value(InputIterator first, InputIterator last) {
  iterator_traits&lt;InputIterator&gt;::value_type result = *first;
  <span class="keywordflow">for</span> (++first; first != last; ++first)
    result = *first;
  <span class="keywordflow">return</span> result;
}    
</pre></div> <p>(Note: this is an example of how to use <code>iterator_traits</code>; it is not an example of good code. There are better ways of finding the last element in a range of <a class="el" href="stldoc_BidirectionalIterator.html">BidirectionalIterator</a>, or even <a class="el" href="stldoc_ForwardIterator.html">ForwardIterator</a>.) </p>
<h2><a class="anchor" id="Definition"></a>
Definition</h2>
<p>Defined in the standard header <a href="iterator">iterator</a>, and in the nonstandard backward-compatibility header <a href="iterator.h">iterator.h</a>. </p>
<h2><a class="anchor" id="Template_parameters"></a>
Template parameters</h2>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<th>Parameter  </th><th>Description  </th><th>Default   </th></tr>
<tr>
<td valign="top"><code>Iterator</code>  </td><td valign="top">The iterator type whose associated types are being accessed.  </td><td valign="top">&#160;   </td></tr>
</table>
<h2><a class="anchor" id="Model_of"></a>
Model of</h2>
<p><a class="el" href="stldoc_DefaultConstructible.html">DefaultConstructible</a>, <a class="el" href="stldoc_Assignable.html">Assignable</a> </p>
<h2><a class="anchor" id="Type_requirements"></a>
Type requirements</h2>
<ul>
<li>
<code>Iterator</code> is a model of one of the iterator concepts. (<a class="el" href="stldoc_InputIterator.html">InputIterator</a>, <a class="el" href="stldoc_OutputIterator.html">OutputIterator</a>, <a class="el" href="stldoc_ForwardIterator.html">ForwardIterator</a>, <a class="el" href="stldoc_BidirectionalIterator.html">BidirectionalIterator</a>, or <a class="el" href="stldoc_RandomAccessIterator.html">RandomAccessIterator</a>.) </li>
</ul>
<h2><a class="anchor" id="Public_base_classes"></a>
Public base classes</h2>
<p>None. </p>
<h2><a class="anchor" id="Members"></a>
Members</h2>
<p>None, except for nested types. </p>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<th>Member  </th><th>Description   </th></tr>
<tr>
<td valign="top"><code>iterator_category</code>  </td><td valign="top">One of the types <code>input_iterator_tag</code>, <code>output_iterator_tag</code>, <code>forward_iterator_tag</code>, <code>bidirectional_iterator_tag</code>, or <code>random_access_iterator_tag</code>. An iterator's category is the <em>most specific</em> iterator concept that it is a model of.   </td></tr>
<tr>
<td valign="top"><code>value_type</code>  </td><td valign="top"><code>Iterator</code>'s value type, as defined in the <a class="el" href="stldoc_trivial.html">trivial</a> requirements.   </td></tr>
<tr>
<td valign="top"><code>difference_type</code>  </td><td valign="top"><code>Iterator</code>'s distance type, as defined in the <a class="el" href="stldoc_InputIterator.html">InputIterator</a> requirements.   </td></tr>
<tr>
<td valign="top"><code>pointer</code>  </td><td valign="top"><code>Iterator</code>'s pointer type: a pointer to its value type.   </td></tr>
<tr>
<td valign="top"><code>reference</code>  </td><td valign="top"><code>Iterator</code>'s reference type: a reference to its value type.   </td></tr>
</table>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<p><a class="anchor" id="3"></a>[3] The <code>iterator_traits</code> class relies on a C++ feature known as <em>partial specialization</em>. Many of today's compilers don't implement the complete standard; in particular, many compilers do not support partial specialization. If your compiler does not support partial specialization, then you will not be able to use <code>iterator_traits</code>, and you will have to continue using the old iterator tag functions <code><a class="el" href="stldoc_iterator_category.html">iterator_category</a></code>, <code><a class="el" href="stldoc_distance_type.html">distance_type</a></code>, and <code><a class="el" href="stldoc_value_type.html">value_type</a></code>. This is one reason that those functions have not yet been removed. </p>
<h2><a class="anchor" id="See_also"></a>
See also</h2>
<p>The <a class="el" href="stldoc_Iterators.html">Iterators</a>, <a class="el" href="stldoc_iterator_tags.html">iterator_tags</a>, <code><a class="el" href="stldoc_input_iterator_tag.html">input_iterator_tag</a>, </code><a class="el" href="stldoc_output_iterator_tag.html">output_iterator_tag</a>, <code><a class="el" href="stldoc_forward_iterator_tag.html">forward_iterator_tag</a>, </code><a class="el" href="stldoc_bidirectional_iterator_tag.html">bidirectional_iterator_tag</a>, <code><a class="el" href="stldoc_random_access_iterator_tag.html">random_access_iterator_tag</a>, </code><a class="el" href="stldoc_input_iterator.html">input_iterator</a>, <code><a class="el" href="stldoc_output_iterator.html">output_iterator</a>, </code><a class="el" href="stldoc_forward_iterator.html">forward_iterator</a>, <code><a class="el" href="stldoc_bidirectional_iterator.html">bidirectional_iterator</a>, </code><a class="el" href="stldoc_random_access_iterator.html">random_access_iterator</a> </p>
</div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
