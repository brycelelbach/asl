<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: Property Model Language Reference</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>Property Model Language Reference<br/>
<small>
[<a class="el" href="group__property__model.html">Property Model Library (Adam)</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
</table>
<p>The Property Model Library is a runtime library (see <a class="el" href="group__adam__engine.html">Property Model Engine</a>). The Property Model Language and <a class="el" href="group__adamparser.html">Property Model Parser</a> are facilities provided to make it easier to assemble an <a class="el" href="classadobe_1_1sheet__t.html" title="The fundamental data structure for the Property Model engine.">adobe::sheet_t</a> from a simple declaration. This manual describes the Property Model Language.</p>
<p>The language is divided into three parts, <a class="el" href="group__expression__reference.html#expression_lexical_conventions">Lexical Conventions</a>, <a class="el" href="group__expression__reference.html#expression_expressions">Expressions</a>, and <a class="el" href="group__adam__reference.html#sheet_declarations">Sheet Declarations</a>. The first two parts are shared by the Layout Library Language, and describe in the <a class="el" href="group__expression__reference.html">Expression Reference</a>.</p>
<h2><a class="anchor" id="sheet_declarations"></a>
Sheet Declarations</h2>
<h3><a class="anchor" id="adam_grammar"></a>
Property Model Grammar</h3>
<div class="fragment"><pre class="fragment">
translation_unit        = { sheet_specifier }.
sheet_specifier         = [lead_comment] "sheet" identifier "{" { qualified_cell_decl } "}"
                            [trail_comment].

qualified_cell_decl     = interface_set_decl | input_set_decl | output_set_decl
                            | constant_set_decl | logic_set_decl | invariant_set_decl
                            | external_set_decl.

interface_set_decl      = "interface"   ":" { [lead_comment] interface_cell_decl }.
input_set_decl          = "input"       ":" { [lead_comment] input_cell_decl }.
output_set_decl         = "output"      ":" { [lead_comment] output_cell_decl }.
constant_set_decl       = "constant"    ":" { [lead_comment] constant_cell_decl }.
logic_set_decl          = "logic"       ":" { [lead_comment] logic_cell_decl }.
invariant_set_decl      = "invariant"   ":" { [lead_comment] invariant_cell_decl }.
external_set_decl       = "external"    ":" { [lead_comment] identifier end_statement }.

interface_cell_decl     = ["unlink"] identifier [initializer] [define_expression] end_statement.
input_cell_decl         = identifier [initializer] end_statement.

output_cell_decl        = named_decl.
constant_cell_decl      = identifier initializer end_statement.
logic_cell_decl         = named_decl | relate_decl.
invariant_cell_decl     = named_decl.

relate_decl             = [conditional] "relate" "{" relate_expression relate_expression
                            { relate_expression } "}" [trail_comment].
relate_expression       = [lead_comment] identifier { "," identifier } define_expression
                            end_statement.
named_decl              = identifier define_expression end_statement.

initializer             = ":" expression.
conditional             = "when" "(" expression ")".

define_expression       = "&lt;==" expression.

end_statement           = ";" [trail_comment].

keywords                += "sheet" | "interface" | "input" | "output" | "constant" | "logic"
                             | "invariant" | "unlink" | "when" | "relate" | "external".
</pre></div><h3><a class="anchor" id="cell_qualifiers"></a>
Cell Access Specifiers</h3>
<h3><a class="anchor" id="initialization"></a>
Initialization</h3>
<h3><a class="anchor" id="advanced_features"></a>
Advanced Features</h3>
<h4><a class="anchor" id="external_types"></a>
External Types and Functions</h4>
<p>Although there are a set of types provided by the language, the type system is extensible to support any C++ type through external functions and values introduced from outside of the system. For example, if an external function were provided to supply an image, other functions could be provided to operator on that image. External functions can be provided through the virtual machine API [ref]. An external function to get an image from a URL might look this:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">struct </span>image_type { }; <span class="comment">// some image structure</span>
image_type get_image_for_url(<span class="keyword">const</span> <span class="keywordtype">char</span>* url); <span class="comment">// Some external function to get an image</span>

adobe::value_t get_image(<span class="keyword">const</span> <a class="code" href="classadobe_1_1version__1_1_1vector.html">adobe::array_t</a>&amp; parameters)
{
    <span class="keywordflow">return</span> adobe::value_t(get_image(parameters[0].get&lt;std::string&gt;().c_str()));
}
</pre></div><p>A function to operate on the image might look like this:</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> guassian_blur(image_type&amp; image); <span class="comment">// Some external operation</span>

adobe::value_t blur_image(<span class="keyword">const</span> <a class="code" href="classadobe_1_1version__1_1_1vector.html">adobe::array_t</a>&amp; parameters)
{
    image_type result = parameters[0].get&lt;image_type&gt;();
    guassian_blur(result);
    <span class="keywordflow">return</span> result;
}
</pre></div><p>After registering these functions with the virtual machine - the following expressions are valid:</p>
<div class="fragment"><pre class="fragment">
get_image("http:\\local\my_image.jpg") == get_image("http:\\local\my_other_image.jpg")
blur_image(get_image("http:\\local\my_image.jpg"))
</pre></div> </div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
