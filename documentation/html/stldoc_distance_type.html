<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: distance_type</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>distance_type </h1>  </div>
</div>
<div class="contents">
<table  cellpadding="0" cellspacing="0" width="100%" border="0">
<tr>
<td align="left"><div align="center">
<img src="iterators.gif" alt="iterators.gif"/>
</div>
 </td><td width="100%"></td><td align="right"><div align="center">
<img src="function.gif" alt="function.gif"/>
</div>
  </td></tr>
<tr>
<td align="left" valign="top"><b>Category</b>: iterators </td><td width="100%"></td><td align="right" valign="top"><b>Component type</b>: function  </td></tr>
</table>
<h2><a class="anchor" id="Prototype"></a>
Prototype</h2>
<p><code>Distance_type</code> is overloaded; it is in fact five different functions. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Distance&gt; 
<span class="keyword">inline</span> Distance* distance_type(<span class="keyword">const</span> input_iterator&lt;T, Distance&gt;&amp;);

<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Distance&gt; 
<span class="keyword">inline</span> Distance* distance_type(<span class="keyword">const</span> forward_iterator&lt;T, Distance&gt;&amp;);

<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Distance&gt; 
<span class="keyword">inline</span> Distance* distance_type(<span class="keyword">const</span> bidirectional_iterator&lt;T, Distance&gt;&amp;);

<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Distance&gt; 
<span class="keyword">inline</span> Distance* distance_type(<span class="keyword">const</span> random_access_iterator&lt;T, Distance&gt;&amp;);

<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> ptrdiff_t* distance_type(<span class="keyword">const</span> T*);
</pre></div> <h2><a class="anchor" id="Description"></a>
Description</h2>
<p><code>Distance_type</code> is an <a class="el" href="stldoc_iterator_tags.html">iterator_tags</a> function: it is used to determine the distance type associated with an iterator. An <a class="el" href="stldoc_InputIterator.html">InputIterator</a>, <a class="el" href="stldoc_ForwardIterator.html">ForwardIterator</a>, <a class="el" href="stldoc_BidirectionalIterator.html">BidirectionalIterator</a>, or <a class="el" href="stldoc_RandomAccessIterator.html">RandomAccessIterator</a> <a href="#1">[1]</a> must have associated with it some signed integral type that is used to represent the distance between two iterators of that type. In some cases (such as an algorithm that must declare a local variable that represents the size of a range), it is necessary to find out an iterator's distance type. Accordingly, <code>distance_type(Iter)</code> returns <code>(Distance*) 0</code>, where <code>Distance</code> is <code>Iter</code>'s distance type. </p>
<p>Although <code>distance_type</code> looks like a single function whose return type depends on its argument type, in reality it is a set of functions; the name <code>distance_type</code> is overloaded. The function <code>distance_type</code> must be overloaded for every iterator type <a href="#1">[1]</a>. </p>
<p>In practice, ensuring that <code>distance_type</code> is defined requires essentially no work at all. It is already defined for pointers, and for the base classes <code><a class="el" href="stldoc_input_iterator.html">input_iterator</a></code>, <code><a class="el" href="stldoc_forward_iterator.html">forward_iterator</a></code>, <code><a class="el" href="stldoc_bidirectional_iterator.html">bidirectional_iterator</a></code>, and <code><a class="el" href="stldoc_random_access_iterator.html">random_access_iterator</a></code>. If you are implementing a new type of forward iterator, for example, you can simply derive it from the base class <code><a class="el" href="stldoc_forward_iterator.html">forward_iterator</a></code>; this means that <code>distance_type</code> (along with <code><a class="el" href="stldoc_iterator_category.html">iterator_category</a></code> and <code><a class="el" href="stldoc_value_type.html">value_type</a></code>) will automatically be defined for your iterator. These base classes are empty: they contain no member functions or member variables, but only type information. Using them should therefore incur no overhead. </p>
<p>Note that, while the function <code>distance_type</code> was present in the original STL, it is no longer present in the most recent draft C++ standard: it has been replaced by the <code><a class="el" href="stldoc_iterator_traits.html">iterator_traits</a></code> class. At present both mechanisms are supported <a href="#2">[2]</a>, but eventually <code>distance_type</code> will be removed. </p>
<h2><a class="anchor" id="Definition"></a>
Definition</h2>
<p>Defined in the standard header <a href="iterator">iterator</a>, and in the nonstandard backward-compatibility header <a href="iterator.h">iterator.h</a>. This function is no longer part of the C++ standard, although it was present in early drafts of the standard. It is retained in this implementation for backward compatibility. </p>
<h2><a class="anchor" id="Requirements_on_types"></a>
Requirements on types</h2>
<p>The argument of <code>distance_type</code> must be an <a class="el" href="stldoc_InputIterator.html">InputIterator</a>, <a class="el" href="stldoc_ForwardIterator.html">ForwardIterator</a>, <a class="el" href="stldoc_BidirectionalIterator.html">BidirectionalIterator</a>, or <a class="el" href="stldoc_RandomAccessIterator.html">RandomAccessIterator</a>. <a href="#1">[1]</a> </p>
<h2><a class="anchor" id="Preconditions"></a>
Preconditions</h2>
<p>None. <code>Distance_type</code>'s argument is even permitted to be a singular iterator. </p>
<h2><a class="anchor" id="Complexity"></a>
Complexity</h2>
<p>At most amortized constant time. In many cases, a compiler should be able to optimize away <code>distance_type</code> entirely. </p>
<h2><a class="anchor" id="Example"></a>
Example</h2>
<div class="fragment"><pre class="fragment"><span class="keyword">template</span> &lt;<span class="keyword">class </span>RandomAccessIterator, <span class="keyword">class </span>LessThanComparable, 
          <span class="keyword">class </span>Distance&gt;
RandomAccessIterator __lower_bound(RandomAccessIterator first,
                                   RandomAccessIterator last, 
                                   <span class="keyword">const</span> LessThanComparable&amp; value,
                                   Distance*)
    Distance len = last - first;
    Distance half;
    RandomAccessIterator middle;

    while (len &gt; 0) {
        half = len / 2;
        middle = first + half;
        <span class="keywordflow">if</span> (*middle &lt; value) {
            first = middle + 1;
            len = len - half - 1;
        } <span class="keywordflow">else</span>
            len = half;
    }
    <span class="keywordflow">return</span> first;
}

<span class="keyword">template</span> &lt;<span class="keyword">class</span> RandomAccessIterator, <span class="keyword">class</span> LessThanComparable&gt;
<span class="keyword">inline</span> RandomAccessIterator <a class="code" href="namespaceadobe_1_1fn.html#a59e44aef9c93131146606040c0b15e38">lower_bound</a>(RandomAccessIterator first,
                                        RandomAccessIterator last,
                                        <span class="keyword">const</span> LessThanComparable&amp; value) {
    <span class="keywordflow">return</span> __lower_bound(first, last, value, distance_type(first));
}
</pre></div><p> The algorithm <code><a class="el" href="stldoc_lower_bound.html">lower_bound</a></code> (a type of binary search) takes a range of iterators, and must declare a local variable whose type is the iterators' distance type. It uses <code>distance type</code>, and an auxiliary function, so that it can declare that variable. <a href="#3">[3]</a> Note: this is a simplified example. The actual algorithm <code><a class="el" href="stldoc_lower_bound.html">lower_bound</a></code> can operate on a range of <a class="el" href="stldoc_RandomAccessIterator.html">RandomAccessIterator</a> or a range of <a class="el" href="stldoc_ForwardIterator.html">ForwardIterator</a>. It uses both <code>distance_type</code> and <code><a class="el" href="stldoc_iterator_category.html">iterator_category</a></code>. </p>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<p><a class="anchor" id="1"></a>[1] Note that <code>distance_type</code> is not defined for <a class="el" href="stldoc_OutputIterator.html">OutputIterator</a> or for <a class="el" href="stldoc_trivial.html">trivial</a>. There is no meaningful definition of a distance for either of those concepts, so there is no need for a distance type. </p>
<p><a class="anchor" id="2"></a>[2] The <code><a class="el" href="stldoc_iterator_traits.html">iterator_traits</a></code> class relies on a C++ feature known as <em>partial specialization</em>. Many of today's compilers don't implement the complete standard; in particular, many compilers do not support partial specialization. If your compiler does not support partial specialization, then you will not be able to use <code><a class="el" href="stldoc_iterator_traits.html">iterator_traits</a></code>, and you will have to continue using the functions <code><a class="el" href="stldoc_iterator_category.html">iterator_category</a></code>, <code>distance_type</code>, and <code><a class="el" href="stldoc_value_type.html">value_type</a></code>. This is one reason that those functions have not yet been removed. </p>
<p><a class="anchor" id="3"></a>[3] This use of an auxiliary function is an extremely common idiom: <code>distance_type</code> is almost always used with auxiliary functions, simply because it returns type information in a form that is hard to use in any other way. This is one of the reasons that <code>distance_type</code> is so much less convenient than <code><a class="el" href="stldoc_iterator_traits.html">iterator_traits</a></code>. </p>
<h2><a class="anchor" id="See_also"></a>
See also</h2>
<p>The <a class="el" href="stldoc_iterator_tags.html">iterator_tags</a> overview, <code><a class="el" href="stldoc_iterator_traits.html">iterator_traits</a></code>, <code><a class="el" href="stldoc_iterator_category.html">iterator_category</a></code>, <code><a class="el" href="stldoc_value_type.html">value_type</a></code>, <code><a class="el" href="stldoc_output_iterator_tag.html">output_iterator_tag</a></code>, <code><a class="el" href="stldoc_input_iterator_tag.html">input_iterator_tag</a></code>, <code><a class="el" href="stldoc_forward_iterator_tag.html">forward_iterator_tag</a></code>, <code><a class="el" href="stldoc_bidirectional_iterator_tag.html">bidirectional_iterator_tag</a></code>, <code><a class="el" href="stldoc_random_access_iterator_tag.html">random_access_iterator_tag</a></code> </p>
</div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
