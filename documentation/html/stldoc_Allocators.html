<!--
    Copyright 2005-2008 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://stlab.adobe.com/licenses.html)

    Some files are held under additional license.
    Please see "http://stlab.adobe.com/licenses.html" for more information.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <TITLE>Adobe Software Technology Lab: Allocators</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="adobe_source.css"/>
    <LINK REL="alternate" TITLE="stlab.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
</head>
<body>
<div id='content'>
<table><tr>
<td colspan='5'>
    <div id='opensource_banner'>
    <table style='width: 100%; padding: 5px;'><tr>
    <td align='left'>
        <a href='index.html' style='border: none'><img src='stlab2007.jpg' alt="stlab.adobe.com"/></a>
    </td>
    <td align='right'>
        <a href='http://www.adobe.com' style='border: none'><img src='adobe_hlogo.gif' alt="Adobe Systems Incorporated"/></a>
    </td>
    </tr></table>
    </div>
</td></tr><tr>
<td valign="top">
    <div id='navtable' height='100%'>
    <div style='margin: 5px'>
        <h4>Documentation</h4>

        <a href="group__asl__overview.html">Overview</a><br/>
        <a href="asl_readme.html">Building ASL</a><br/>
        <a href="asl_toc.html">Documentation</a><br/>
        <a href="http://stlab.adobe.com/wiki/index.php/Supplementary_ASL_Documentation">Library Wiki Docs</a><br/>
        <a href="asl_indices.html">Indices</a><br/>
        <a href="http://stlab.adobe.com/perforce/">Browse Perforce</a><br/>

        <h4>More Info</h4>

        <a href="asl_release_notes.html">Release Notes</a><br/>
        <a href="http://stlab.adobe.com/wiki/">Wiki</a><br/>
        <a href="asl_search.html">Site Search</a><br/>
        <a href="licenses.html">License</a><br/>
        <a href="success_stories.html">Success Stories</a><br/>
        <a href="asl_contributors.html">Contributors</a><br/>

        <h4>Media</h4>

        <a href="http://sourceforge.net/project/showfiles.php?group_id=132417&amp;package_id=145420">Download</a><br/>
        <a href="asl_download_perforce.html">Perforce Depots</a><br/>

        <h4>Support</h4>

        <a href="http://sourceforge.net/projects/adobe-source/">ASL SourceForge Home</a><br/>
        <a href="http://sourceforge.net/mail/?group_id=132417">Mailing Lists</a><br/>
        <a href="http://sourceforge.net/forum/?group_id=132417">Discussion Forums</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724218&amp;group_id=132417&amp;func=browse">Report Bugs</a><br/>
        <a href="http://sourceforge.net/tracker/?atid=724221&amp;group_id=132417&amp;func=browse">Suggest Features</a><br/>
        <a href="asl_contributing.html">Contribute to ASL</a><br/>

        <h4>RSS</h4>

        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417">Short-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1">Full-text news</a><br/>
        <a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=132417">File releases</a><br/>

        <h4>Other Adobe Projects</h4>

        <a href="http://sourceforge.net/adobe/">Open @ Adobe</a><br/>
        <a href="http://opensource.adobe.com/">Adobe Open Source</a><br/>
        <a href="http://labs.adobe.com/">Adobe Labs</a><br/>
        <a href="http://stlab.adobe.com/amg/">Adobe Media Gallery</a><br/>
        <a href="http://stlab.adobe.com/performance/">C++ Benchmarks</a><br/>

        <h4>Other Resources</h4>

        <a href="http://boost.org">Boost</a><br/>
        <a href="http://www.riaforge.com/">RIAForge</a><br/>
        <a href="http://www.sgi.com/tech/stl">SGI STL</a><br/>
    </div>
    </div>
</td>
<td id='maintable' width="100%" valign="top">

<!-- End Header -->
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>Allocators </h1>  </div>
</div>
<div class="contents">
<table  cellpadding="0" cellspacing="0" width="100%" border="0">
<tr>
<td align="left"><div align="center">
<img src="allocators.gif" alt="allocators.gif"/>
</div>
 </td><td width="100%"></td><td align="right"><div align="center">
<img src="overview.gif" alt="overview.gif"/>
</div>
  </td></tr>
<tr>
<td align="left" valign="top"><b>Category</b> : allocators </td><td width="100%"></td><td align="right" valign="top"><b>Component type</b>: overview  </td></tr>
</table>
<h2><a class="anchor" id="Summary"></a>
Summary</h2>
<p>Allocators encapsulate allocation and deallocation of memory. They provide a low-level interface that permits efficient allocation of many small objects; different allocator types represent different schemes for memory management. </p>
<p>Note that allocators simply allocate and deallocate memory, as opposed to creating and destroying objects. The STL also includes several low-level algorithms for manipulating uninitialized memory. </p>
<p>Note also that allocators do not attempt to encapsulate multiple memory models. The C++ language only defines a single memory model (the difference of two pointers, for example, is always <code>ptrdiff_t</code>), and this memory model is the only one that allocators support. <em>This is a major change from the definition of allocators in the original STL.</em> <a href="#1">[1]</a> </p>
<h2><a class="anchor" id="Description"></a>
Description</h2>
<p>The details of the allocator interface are still subject to change, and we do not guarantee that specific member functions will remain in future versions. You should think of an allocator as a "black box". That is, you may select a container's memory allocation strategy by instantiating the container template with a particular allocator <a href="#2">[2]</a>, but you should not make any assumptions about how the container actually uses the allocator. </p>
<p>The available allocators are as follows. In most cases you shouldn't have to worry about the distinction: the default allocator, <code>alloc</code>, is usually the best choice. </p>
<table  border="1" cellpadding="3" cellspacing="3">
<tr>
<td valign="top"><code>alloc</code>  </td><td valign="top">The default allocator. It is thread-safe, and usually has the best performance characteristics.   </td></tr>
<tr>
<td valign="top"><code>pthread_alloc</code>  </td><td valign="top">A thread-safe allocator that uses a different memory pool for each thread; you can only use <code>pthread_alloc</code> if your operating system provides pthreads. <code>Pthread_alloc</code> is usually faster than <code>alloc</code>, especially on multiprocessor systems. It can, however, cause resource fragmentation: memory deallocated in one thread is not available for use by other threads.   </td></tr>
<tr>
<td valign="top"><code>single_client_alloc</code>  </td><td valign="top">A fast but thread-unsafe allocator. In programs that only have one thread, this allocator might be faster than <code>alloc</code>.   </td></tr>
<tr>
<td valign="top"><code>malloc_alloc</code>  </td><td valign="top">An allocator that simply uses the standard library function <code>malloc</code>. It is thread-safe but slow; the main reason why you might sometimes want to use it is to get more useful information from bounds-checking or leak-detection tools while you are debugging.   </td></tr>
</table>
<h2><a class="anchor" id="Examples"></a>
Examples</h2>
<div class="fragment"><pre class="fragment">vector&lt;double&gt; V(100, 5.0);     <span class="comment">// Uses the default allocator.</span>
vector&lt;double, single_client_alloc&gt; local(V.begin(), V.end());
</pre></div> <h2><a class="anchor" id="Concepts"></a>
Concepts</h2>
<ul>
<li>
Allocator </li>
</ul>
<h2><a class="anchor" id="Types"></a>
Types</h2>
<ul>
<li>
<code>alloc</code> </li>
<li>
<code>pthread_alloc</code> </li>
<li>
<code>single_client_alloc</code> </li>
<li>
<code>malloc_alloc</code> </li>
<li>
<code><a class="el" href="stldoc_raw_storage_iterator.html">raw_storage_iterator</a></code> </li>
</ul>
<h2><a class="anchor" id="Functions"></a>
Functions</h2>
<ul>
<li>
<code><a class="el" href="stldoc_construct.html">construct</a></code> </li>
<li>
<code><a class="el" href="stldoc_destroy.html">destroy</a></code> </li>
<li>
<code><a class="el" href="stldoc_uninitialized_copy.html">uninitialized_copy</a></code> </li>
<li>
<code><a class="el" href="stldoc_uninitialized_fill.html">uninitialized_fill</a></code> </li>
<li>
<code><a class="el" href="stldoc_uninitialized_fill_n.html">uninitialized_fill_n</a></code> </li>
<li>
<code><a class="el" href="stldoc_get_temporary_buffer.html">get_temporary_buffer</a></code> </li>
<li>
<code><a class="el" href="stldoc_return_temporary_buffer.html">return_temporary_buffer</a></code> </li>
</ul>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<p><a class="anchor" id="1"></a>[1] The reason for this change is that the new interface reduces memory fragmentation, and that it allows an implementation that is both efficient and thread-safe. </p>
<p><a class="anchor" id="2"></a>[2] Different containers may use different allocators. You might, for example, have some containers that use the default allocator <code>alloc</code> and others that use <code>pthread_alloc</code>. Note, however, that <code>vector&lt;int&gt;</code> and <code>vector&lt;int, pthread_alloc&gt;</code> are distinct types. </p>
<h2><a class="anchor" id="See_also"></a>
See also</h2>
</div>

<!-- Begin Footer -->
</td></tr>
</table>
</div> <!-- content -->
<div class='footerdiv'>
    <div id='footersub'>
        <ul>
            <li><a href="http://www.adobe.com/go/gftray_foot_aboutadobe">Company</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_contact_adobe">Contact Us</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_accessibility">Accessibility</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_report_piracy">Report Piracy</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_permissions_trademarks">Permissions &amp; Trademarks</a>&nbsp;|&nbsp;</li>
            <li><a href="http://www.adobe.com/go/gftray_foot_product_license_agreements">Product License Agreements</a>&nbsp;|&nbsp;</li>
    
            <li><a href="http://www.adobe.com/go/gftray_foot_feedback">Send Feedback</a></li>
        </ul>
        <div>
            <p>Copyright &#169; 2006-2007 Adobe Systems Incorporated.</p>
            <p>Use of this website signifies your agreement to the <a href="http://www.adobe.com/go/gftray_foot_terms">Terms of Use</a> and <a href="http://www.adobe.com/go/gftray_foot_privacy_security">Online Privacy Policy</a>.</p>
            <p>Search powered by <a href="http://www.google.com/" target="new">Google</a></p>
        </div>
	</div>
</div>
<script type="text/javascript">
_uacct = "UA-396569-1";
urchinTracker();
</script>
</body>
</html>
